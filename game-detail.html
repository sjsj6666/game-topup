<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="seo.detail.title">Ê∏∏ÊàèËØ¶ÊÉÖ - GameTopUp</title>
  <meta name="description" data-i18n="seo.detail.desc" content="Êü•ÁúãÊ∏∏ÊàèËØ¶ÊÉÖÂíåÂÖÖÂÄºÂ•óÈ§ê">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="config.js"></script>
  <script src="translations.js"></script>
  <script src="i18n.js"></script>
  <script src="seo-loader.js"></script>
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --primary-color: #6C63FF;
      --secondary-color: #FF6584;
      --bg-color: #F8F9FA;
      --card-bg: #FFFFFF;
      --text-dark: #333;
      --text-light: #666;
    }
    [data-theme="dark"] {
      --bg-color: #1A1A2E;
      --card-bg: #16213E;
      --text-dark: #E8E8E8;
      --text-light: #A0A0A0;
    }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: var(--bg-color); color: var(--text-dark); padding-bottom: 80px; }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
    .back-header { background: var(--card-bg); padding: 15px 0; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .back-btn { background: none; border: none; font-size: 16px; color: var(--text-dark); cursor: pointer; display: flex; align-items: center; gap: 10px; }
    .game-hero { position: relative; height: 300px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); margin-bottom: -50px; }
    .game-hero-content { position: absolute; bottom: 30px; left: 20px; color: white; }
    .game-hero-title { font-size: 2rem; font-weight: 700; margin-bottom: 5px; }
    .game-info-card { background: var(--card-bg); border-radius: 16px; padding: 20px; margin: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .game-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; }
    .game-tag { background: #f0f0f0; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; color: var(--text-light); }
    .game-description { color: var(--text-light); line-height: 1.8; margin-bottom: 20px; }
    .section-title { font-size: 1.4rem; font-weight: 600; margin-bottom: 15px; }
    .package-list { display: flex; flex-direction: column; gap: 12px; }
    .package-item { background: var(--card-bg); border-radius: 12px; padding: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); cursor: pointer; border: 2px solid transparent; }
    .package-item:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
    .package-item.selected { border-color: var(--primary-color); background-color: rgba(108, 99, 255, 0.05); }
    .package-title { font-weight: 600; margin-bottom: 5px; }
    .package-desc { font-size: 0.9rem; color: var(--text-light); }
    .package-price { font-size: 1.2rem; font-weight: 700; color: var(--primary-color); }
    .package-original { font-size: 0.9rem; color: var(--text-light); text-decoration: line-through; }
    .package-badge { display: inline-block; background: var(--secondary-color); color: white; padding: 2px 8px; border-radius: var(--radius-sm); font-size: 0.7rem; margin-left: 5px; }
    .quantity-section { background: var(--card-bg); border-radius: 12px; padding: 15px; margin: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .quantity-control { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
    .quantity-btn { width: 36px; height: 36px; border-radius: 50%; border: 1px solid #ddd; background: var(--card-bg); font-size: 1.2rem; cursor: pointer; }
    .quantity-value { font-size: 1.2rem; font-weight: 600; min-width: 40px; text-align: center; }
    .total-section { background: var(--card-bg); border-radius: 12px; padding: 15px; margin: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .total-row { display: flex; justify-content: space-between; margin-bottom: 10px; }
    .total-label { color: var(--text-light); }
    .total-value { font-weight: 600; }
    .total-final { border-top: 1px solid #eee; padding-top: 10px; margin-top: 10px; font-size: 1.2rem; font-weight: 700; color: var(--primary-color); }
    .payment-section { margin: 20px; }
    .payment-methods { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px; }
    .payment-method { background: var(--card-bg); border-radius: var(--radius-sm); padding: 15px; text-align: center; border: 2px solid #eee; cursor: pointer; transition: all 0.3s; }
    .payment-method:hover { border-color: var(--primary-color); }
    .payment-method.selected { border-color: var(--primary-color); background-color: rgba(108, 99, 255, 0.05); }
    .payment-icon { font-size: 1.5rem; margin-bottom: 8px; }
    .payment-name { font-size: 0.9rem; color: var(--text-dark); }
    .reviews-section { margin: 20px; }
    .review-list { margin-top: 15px; }
    .review-item { background: var(--card-bg); border-radius: var(--radius-md); padding: 15px; margin-bottom: 12px; box-shadow: var(--shadow-sm); }
    .review-header { display: flex; align-items: center; margin-bottom: 10px; }
    .review-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-right: 10px; }
    .review-info { flex: 1; }
    .review-name { font-weight: 600; margin-bottom: 2px; }
    .review-date { font-size: 0.8rem; color: var(--text-muted); }
    .review-stars { color: #FFD700; font-size: 0.9rem; }
    .review-content { color: var(--text-light); line-height: 1.6; }
    .action-footer { position: fixed; bottom: 0; left: 0; right: 0; background: var(--card-bg); padding: 15px 20px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 1000; display: flex; gap: 15px; }
    .action-btn { flex: 1; padding: 15px; border-radius: var(--radius-lg); font-weight: 600; font-size: 16px; cursor: pointer; transition: all 0.3s; border: none; display: flex; align-items: center; justify-content: center; gap: 8px; }
    .btn-cart { background: #f8f9fa; color: var(--text-dark); border: 1px solid #ddd; }
    .btn-cart:hover { background: #e9ecef; }
    .btn-buy { background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); color: white; box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3); }
    .btn-buy:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(108, 99, 255, 0.4); }
    .loading { text-align: center; padding: 40px; color: var(--text-light); }
    .loading i { font-size: 2rem; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @media (min-width: 768px) {
      .container { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; padding: 20px; }
      .main-content { grid-column: 1; }
      .sidebar { grid-column: 2; }
      .game-hero { height: 400px; border-radius: var(--radius-lg); margin: 20px 20px -100px 20px; }
      .game-info-card, .packages-section, .quantity-section, .total-section, .payment-section, .reviews-section { margin: 0 0 20px 0; }
      .action-footer { display: none; }
      .desktop-actions { display: block; position: sticky; top: 100px; }
    }
    .desktop-actions { display: none; }
  </style>
</head>
<body>
  <header class="back-header">
    <div class="container">
      <button class="back-btn" onclick="history.back()">
        <i class="fas fa-arrow-left"></i> <span data-i18n="common.back">ËøîÂõû</span>
      </button>
    </div>
  </header>

  <section class="game-hero" id="gameHero">
    <div class="game-hero-content">
      <h1 class="game-hero-title" id="gameTitle" data-i18n="detail.loading">Âä†ËΩΩ‰∏≠...</h1>
    </div>
  </section>

  <div class="container">
    <div class="main-content">
      <div class="game-info-card">
        <div class="game-tags" id="gameTags"></div>
        <div class="game-description" id="gameDescription"></div>
        <div class="game-features">
          <div style="display: flex; align-items: center; margin-bottom: 10px;">
            <i class="fas fa-check-circle" style="color: var(--success-color); margin-right: 8px;"></i>
            <span data-i18n="detail.feature.official">ÂÆòÊñπÊ∏†ÈÅì ÂÆâÂÖ®Èù†Ë∞±</span>
          </div>
          <div style="display: flex; align-items: center; margin-bottom: 10px;">
            <i class="fas fa-check-circle" style="color: var(--success-color); margin-right: 8px;"></i>
            <span data-i18n="detail.feature.fast">ÁßíÈÄüÂà∞Ë¥¶ Êó†ÈúÄÁ≠âÂæÖ</span>
          </div>
          <div style="display: flex; align-items: center;">
            <i class="fas fa-check-circle" style="color: var(--success-color); margin-right: 8px;"></i>
            <span data-i18n="detail.feature.support">7√ó24 Â∞èÊó∂ ÂÆ¢ÊúçÊîØÊåÅ</span>
          </div>
        </div>
      </div>

      <div class="packages-section">
        <h2 class="section-title" data-i18n="detail.packages.title">üí∞ ÂÖÖÂÄºÂ•óÈ§ê</h2>
        <div class="package-list" id="packageList">
          <div class="loading"><i class="fas fa-spinner"></i><p data-i18n="common.loading">Âä†ËΩΩÂ•óÈ§ê‰∏≠...</p></div>
        </div>
      </div>

      <div class="quantity-section">
        <div class="quantity-control">
          <div class="quantity-label" data-i18n="detail.quantity.label">Ë¥≠‰π∞Êï∞Èáè</div>
          <div class="quantity-input">
            <button class="quantity-btn" onclick="changeQuantity(-1)">-</button>
            <span class="quantity-value" id="quantityValue">1</span>
            <button class="quantity-btn" onclick="changeQuantity(1)">+</button>
          </div>
        </div>
        <div style="font-size: 0.9rem; color: var(--text-light);" data-i18n="detail.quantity.note">Ê≥®ÔºöÈÉ®ÂàÜÂ•óÈ§êÊúâË¥≠‰π∞Êï∞ÈáèÈôêÂà∂</div>
      </div>

      <div class="reviews-section">
        <h2 class="section-title" data-i18n="detail.reviews.title">‚≠ê Áî®Êà∑ËØÑ‰ª∑</h2>
        <div class="review-list" id="reviewList"></div>
      </div>
    </div>

    <div class="sidebar">
      <div class="total-section desktop-actions">
        <div class="total-row">
          <span class="total-label" data-i18n="detail.total.packagePrice">Â•óÈ§êÂçï‰ª∑</span>
          <span class="total-value" id="totalPackage">¬•0.00</span>
        </div>
        <div class="total-row">
          <span class="total-label" data-i18n="detail.total.quantity">Ë¥≠‰π∞Êï∞Èáè</span>
          <span class="total-value" id="totalQuantity">√ó1</span>
        </div>
        <div class="total-row">
          <span class="total-label" data-i18n="detail.total.discount">‰ºòÊÉ†ÊäòÊâ£</span>
          <span class="total-value" id="totalDiscount">-¬•0.00</span>
        </div>
        <div class="total-row total-final">
          <span data-i18n="detail.total.label">Â∫î‰ªòÊÄªÈ¢ù</span>
          <span id="totalAmount">¬•0.00</span>
        </div>

        <div style="margin-top: 20px;">
          <div class="section-title" style="font-size: 1.1rem;" data-i18n="detail.payment.title">ÊîØ‰ªòÊñπÂºè</div>
          <div class="payment-methods">
            <div class="payment-method selected" data-method="alipay">
              <div class="payment-icon"><i class="fab fa-alipay"></i></div>
              <div class="payment-name" data-i18n="detail.payment.alipay">ÊîØ‰ªòÂÆù</div>
            </div>
            <div class="payment-method" data-method="wechat">
              <div class="payment-icon"><i class="fab fa-weixin"></i></div>
              <div class="payment-name" data-i18n="detail.payment.wechat">ÂæÆ‰ø°ÊîØ‰ªò</div>
            </div>
            <div class="payment-method" data-method="paypal">
              <div class="payment-icon"><i class="fab fa-paypal"></i></div>
              <div class="payment-name" data-i18n="detail.payment.paypal">PayPal</div>
            </div>
          </div>
        </div>

        <div style="margin-top: 25px; display: flex; gap: 10px;">
          <button class="action-btn btn-cart desktop-only" id="desktopCartBtn" onclick="addToCart()">
            <i class="fas fa-shopping-cart"></i> <span data-i18n="detail.btn.cart">Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶</span>
          </button>
          <button class="action-btn btn-buy desktop-only" id="desktopBuyBtn" onclick="buyNow()">
            <i class="fas fa-bolt"></i> <span data-i18n="detail.btn.buy">Á´ãÂç≥Ë¥≠‰π∞</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="action-footer">
    <button class="action-btn btn-cart" id="mobileCartBtn" onclick="addToCart()">
      <i class="fas fa-shopping-cart"></i> <span data-i18n="detail.btn.cart">Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶</span>
    </button>
    <button class="action-btn btn-buy" id="mobileBuyBtn" onclick="buyNow()">
      <i class="fas fa-bolt"></i> <span data-i18n="detail.btn.buy">Á´ãÂç≥Ë¥≠‰π∞</span>
    </button>
  </div>

  <script>
    let currentGame = null;
    let packages = [];
    let selectedPackage = null;
    let quantity = 1;
    let paymentMethod = 'alipay';

    async function loadGameDetail() {
      const urlParams = new URLSearchParams(window.location.search);
      const gameId = urlParams.get('game');
      
      if (!gameId) { alert('Ê∏∏Êàè‰∏çÂ≠òÂú®'); window.location.href = 'index.html'; return; }

      try {
        const { data, error } = await db.from('games').select('*').eq('id', gameId).eq('active', true).single();
        
        if (error || !data) {
          const sampleGame = getSampleGame(gameId);
          if (sampleGame) {
            renderGame(sampleGame);
            await loadPackages(gameId);
            renderReviews(getSampleReviews(gameId));
            if (typeof updateGameSEO === 'function') updateGameSEO(sampleGame);
          } else {
            alert('Ê∏∏Êàè‰∏çÂ≠òÂú®');
            window.location.href = 'index.html';
          }
          return;
        }

        renderGame(data);
        await loadPackages(gameId);
        if (data.reviews) renderReviews(data.reviews);
        else renderReviews(getSampleReviews(gameId));
        if (typeof updateGameSEO === 'function') updateGameSEO(data);

      } catch (err) {
        console.error('Âä†ËΩΩÊ∏∏ÊàèÂ§±Ë¥•:', err);
        alert('Âä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Âà∑Êñ∞ÈáçËØï');
      }
    }

    function renderGame(game) {
      currentGame = game;
      if (game.gradient) document.getElementById('gameHero').style.background = game.gradient;
      document.getElementById('gameTitle').textContent = game.name;
      if (game.category) {
        document.getElementById('gameTags').innerHTML = `<span class="game-tag hot">üî• ${t('home.category.hot')}</span>` + 
          game.category.map(cat => `<span class="game-tag">${cat}</span>`).join('');
      }
      document.getElementById('gameDescription').textContent = game.description || '';
    }

    async function loadPackages(gameId) {
      try {
        const { data, error } = await db.from('packages').select('*').eq('game_id', gameId).eq('active', true).order('price', { ascending: true });
        if (error) throw error;
        packages = data || [];
        if (packages.length === 0) packages = getSamplePackages(gameId);
        renderPackages();
        if (packages.length > 0) selectPackage(packages[0]);
      } catch (err) {
        console.error('Âä†ËΩΩÂ•óÈ§êÂ§±Ë¥•:', err);
        document.getElementById('packageList').innerHTML = '<div class="loading">Âä†ËΩΩÂ§±Ë¥•</div>';
      }
    }

    function renderPackages() {
      const list = document.getElementById('packageList');
      if (packages.length === 0) {
        list.innerHTML = '<div class="loading">ÊöÇÊó†Â•óÈ§ê</div>';
        return;
      }
      list.innerHTML = packages.map(pkg => {
        const badgeHtml = pkg.badge ? `<span class="package-badge">${pkg.badge}</span>` : '';
        const recommendHtml = pkg.recommend ? `<div style="font-size: 0.8rem; color: var(--secondary-color); margin-top: 3px;">üî• ${t('home.category.hot')}</div>` : '';
        const originalPriceHtml = pkg.original_price && pkg.original_price > pkg.price ? `<div class="package-original">${SITE_CONFIG?.currency || '¬•'}${pkg.original_price}</div>` : '';
        return `
          <div class="package-item" data-id="${pkg.id}">
            <div class="package-left">
              <div class="package-title">${pkg.name} ${badgeHtml}</div>
              <div class="package-desc">${pkg.description || ''}</div>
              ${recommendHtml}
            </div>
            <div class="package-right">
              <div class="package-price">${SITE_CONFIG?.currency || '¬•'}${pkg.price}</div>
              ${originalPriceHtml}
            </div>
          </div>
        `;
      }).join('');
      list.querySelectorAll('.package-item').forEach(item => {
        item.addEventListener('click', () => {
          const pkgId = parseInt(item.dataset.id);
          const pkg = packages.find(p => p.id === pkgId);
          if (pkg) selectPackage(pkg);
        });
      });
    }

    function selectPackage(pkg) {
      selectedPackage = pkg;
      document.getElementById('packageList').querySelectorAll('.package-item').forEach(item => {
        item.classList.remove('selected');
        if (parseInt(item.dataset.id) === pkg.id) item.classList.add('selected');
      });
      updateTotal();
    }

    function changeQuantity(delta) {
      quantity = Math.max(1, quantity + delta);
      document.getElementById('quantityValue').textContent = quantity;
      updateTotal();
    }

    function updateTotal() {
      if (!selectedPackage) return;
      const price = selectedPackage.price;
      const originalPrice = selectedPackage.original_price || price;
      const discount = originalPrice - price;
      const total = price * quantity;
      const totalDiscount = discount * quantity;
      document.getElementById('totalPackage').textContent = `${SITE_CONFIG?.currency || '¬•'}${price.toFixed(2)}`;
      document.getElementById('totalQuantity').textContent = `√ó${quantity}`;
      document.getElementById('totalDiscount').textContent = `-${SITE_CONFIG?.currency || '¬•'}${totalDiscount.toFixed(2)}`;
      document.getElementById('totalAmount').textContent = `${SITE_CONFIG?.currency || '¬•'}${total.toFixed(2)}`;
    }

    function addToCart() {
      if (!selectedPackage) { alert(t('notify.cart.select')); return; }
      const cartItem = { gameId: currentGame?.id, gameName: currentGame?.name, package: selectedPackage, quantity: quantity, total: selectedPackage.price * quantity, addedAt: new Date().toISOString() };
      let cart = JSON.parse(localStorage.getItem('gameTopUpCart') || '[]');
      cart.push(cartItem);
      localStorage.setItem('gameTopUpCart', JSON.stringify(cart));
      const badge = document.getElementById('cartBadge');
      if (badge) badge.textContent = cart.length;
      alert(t('notify.cart.added'));
    }

    function buyNow() {
      if (!selectedPackage) { alert(t('notify.cart.select')); return; }
      const orderData = { gameId: currentGame?.id, gameName: currentGame?.name, package: selectedPackage, quantity: quantity, total: selectedPackage.price * quantity, paymentMethod: paymentMethod };
      sessionStorage.setItem('pendingOrder', JSON.stringify(orderData));
      window.location.href = 'payment.html';
    }

    function renderReviews(reviews) {
      const list = document.getElementById('reviewList');
      if (!reviews || reviews.length === 0) {
        list.innerHTML = '<div style="text-align: center; color: var(--text-light); padding: 20px;">ÊöÇÊó†ËØÑ‰ª∑</div>';
        return;
      }
      list.innerHTML = reviews.map(review => {
        const avatarLetter = review.name?.charAt(0) || 'U';
        return `
          <div class="review-item">
            <div class="review-header">
              <div class="review-avatar">${avatarLetter}</div>
              <div class="review-info">
                <div class="review-name">${review.name}</div>
                <div class="review-date">${review.date || ''}</div>
              </div>
              <div class="review-stars">${generateStars(review.rating || 5)}</div>
            </div>
            <div class="review-content">${review.content || ''}</div>
          </div>
        `;
      }).join('');
    }

    function generateStars(rating) {
      const full = Math.floor(rating);
      const half = rating % 1 >= 0.5 ? 1 : 0;
      const empty = 5 - full - half;
      return `${'<i class="fas fa-star"></i>'.repeat(full)}${half ? '<i class="fas fa-star-half-alt"></i>' : ''}${'<i class="far fa-star"></i>'.repeat(empty)}`;
    }

    function getSampleGame(gameId) {
      const games = {
        'genshin': { id: 'genshin', name: 'ÂéüÁ•û', name_en: 'Genshin Impact', description: 'Âú®ÊèêÁì¶ÁâπÂ§ßÈôÜÁöÑÂ•áÂπª‰∏ñÁïå‰∏≠Â±ïÂºÄÂÜíÈô©', category: ['ÂºÄÊîæ‰∏ñÁïå', 'ËßíËâ≤ÊâÆÊºî'], rating: 4.8, downloads: '200 ‰∏á+', gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', price: 6 },
        'honor': { id: 'honor', name: 'ÁéãËÄÖËç£ËÄÄ', name_en: 'Honor of Kings', description: '5V5 Âõ¢ÈòüÂÖ¨Âπ≥Á´ûÊäÄÊâãÊ∏∏', category: ['MOBA', '5V5'], rating: 4.7, downloads: '500 ‰∏á+', gradient: 'linear-gradient(135deg, #FF416C 0%, #FF4B2B 100%)', price: 1 },
        'starrail': { id: 'starrail', name: 'Â¥©ÂùèÔºöÊòüÁ©πÈìÅÈÅì', name_en: 'Honkai Star Rail', description: 'Èì∂Ê≤≥ÂÜíÈô©Á≠ñÁï•Ê∏∏Êàè', category: ['Á≠ñÁï•', 'ÂõûÂêàÂà∂'], rating: 4.9, downloads: '150 ‰∏á+', gradient: 'linear-gradient(135deg, #834d9b 0%, #d04ed6 100%)', price: 6 }
      };
      return games[gameId];
    }

    function getSamplePackages(gameId) {
      return [
        { id: 1, name: "60 ÁªìÊô∂", price: 6, original_price: 6, recommend: false },
        { id: 2, name: "300 ÁªìÊô∂", price: 30, original_price: 30, recommend: false },
        { id: 3, name: "980 ÁªìÊô∂", price: 98, original_price: 98, recommend: true },
        { id: 4, name: "1980 ÁªìÊô∂", price: 198, original_price: 198, recommend: true },
        { id: 5, name: "3280 ÁªìÊô∂", price: 328, original_price: 328, recommend: true },
        { id: 6, name: "6480 ÁªìÊô∂", price: 648, original_price: 864, badge: "25% OFF", recommend: true }
      ];
    }

    function getSampleReviews(gameId) {
      return [
        { name: "Áé©ÂÆ∂ A", date: "2026-02-20", rating: 5, content: "ÂÖÖÂÄºÁßíÂà∞Ë¥¶ÔºåÊúçÂä°ÂæàÁ®≥ÂÆöÔºÅ" },
        { name: "Áé©ÂÆ∂ B", date: "2026-02-19", rating: 5, content: "ÊØîÂÆòÊñπ‰æøÂÆúÔºåÊé®ËçêÔºÅ" },
        { name: "Áé©ÂÆ∂ C", date: "2026-02-18", rating: 4, content: "Á¨¨‰∏ÄÊ¨°Áî®Ôºå‰ΩìÈ™å‰∏çÈîô" }
      ];
    }

    document.addEventListener('DOMContentLoaded', () => {
      loadGameDetail();
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      
      document.querySelectorAll('.payment-method').forEach(method => {
        method.addEventListener('click', () => {
          document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
          method.classList.add('selected');
          paymentMethod = method.dataset.method;
        });
      });
    });
  </script>
</body>
</html>